<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ôn thi Toán lớp 7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
        }
        .answer-btn {
            transition: all 0.2s ease-in-out;
        }
        .answer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .correct {
            background-color: #22c55e !important; /* green-500 */
            color: white !important;
            border-color: #16a34a !important; /* green-600 */
        }
        .incorrect {
            background-color: #ef4444 !important; /* red-500 */
            color: white !important;
            border-color: #dc2626 !important; /* red-600 */
        }
        .disabled {
            pointer-events: none;
            opacity: 0.8;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-2xl mx-auto">
        <div id="start-screen" class="text-center bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-xl">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-600 dark:text-blue-400 mb-4">Bài tập ôn thi Toán lớp 7</h1>
            <p class="text-lg mb-6">Sẵn sàng thử thách kiến thức của bạn!</p>
            <p class="text-base mb-8">Một bài kiểm tra gồm 20 câu hỏi ngẫu nhiên từ ngân hàng 100 câu.</p>
            <button id="start-btn" class="w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-12 rounded-lg text-xl shadow-lg transition-transform transform hover:scale-105">
                Bắt đầu
            </button>
        </div>

        <div id="quiz-container" class="hidden bg-white dark:bg-gray-800 p-6 md:p-8 rounded-2xl shadow-xl">
            <!-- Progress Bar and Score -->
            <div class="flex justify-between items-center mb-4">
                <div class="text-lg font-semibold">Câu <span id="current-q-number"></span>/<span id="total-q-in-quiz"></span></div>
                <div class="text-lg font-bold">
                    Điểm: <span id="score">0</span>
                </div>
            </div>
            
            <!-- Question -->
            <div id="question-container" class="mb-6">
                <p class="text-xl md:text-2xl font-semibold" id="question-text">Câu hỏi sẽ hiện ở đây...</p>
            </div>

            <!-- Answers -->
            <div id="answer-buttons" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Buttons will be generated by JS -->
            </div>

            <!-- Navigation -->
            <div class="mt-8 flex justify-end">
                <button id="next-btn" class="hidden bg-gray-700 hover:bg-gray-800 dark:bg-gray-600 dark:hover:bg-gray-500 text-white font-bold py-2 px-8 rounded-lg transition-all">
                    Câu tiếp
                </button>
            </div>
        </div>

        <div id="result-screen" class="hidden text-center bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-xl">
             <h2 class="text-3xl font-bold mb-4">Hoàn thành!</h2>
             <p class="text-xl mb-2">Kết quả của bạn:</p>
             <p class="text-5xl font-extrabold text-blue-600 dark:text-blue-400 mb-6" id="final-score">0/20</p>
             <p class="text-lg mb-8" id="result-message">Cố gắng hơn ở lần sau nhé!</p>
             <button id="restart-btn" class="w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-12 rounded-lg text-xl shadow-lg transition-transform transform hover:scale-105">
                 Làm lại
             </button>
        </div>
    </div>

    <script>
        // --- DOM Elements ---
        const startScreen = document.getElementById('start-screen');
        const quizContainer = document.getElementById('quiz-container');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const questionText = document.getElementById('question-text');
        const answerButtons = document.getElementById('answer-buttons');
        const scoreElement = document.getElementById('score');
        const finalScoreElement = document.getElementById('final-score');
        const resultMessageElement = document.getElementById('result-message');
        const currentQNumberElement = document.getElementById('current-q-number');
        const totalQInQuizElement = document.getElementById('total-q-in-quiz');

        // --- Expanded Quiz Questions Bank (100 Questions) ---
        const questions = [
            // Chương 1: Số hữu tỉ - Số thực (20 câu)
            { question: "Kết quả của phép tính 1/2 + (-3/4) là:", answers: [{ text: "-1/4", correct: true }, { text: "1/4", correct: false }, { text: "5/4", correct: false }, { text: "-5/4", correct: false }] },
            { question: "Giá trị tuyệt đối của -1,5 là:", answers: [{ text: "1,5", correct: true }, { text: "-1,5", correct: false }, { text: "0", correct: false }, { text: "15", correct: false }] },
            { question: "Kết quả của ((-2)/3)³ là:", answers: [{ text: "-8/27", correct: true }, { text: "8/27", correct: false }, { text: "-6/9", correct: false }, { text: "6/9", correct: false }] },
            { question: "Làm tròn số 3,14159 đến chữ số thập phân thứ hai, ta được:", answers: [{ text: "3,14", correct: true }, { text: "3,15", correct: false }, { text: "3,1", correct: false }, { text: "3,142", correct: false }] },
            { question: "Nếu √x = 9 thì x bằng:", answers: [{ text: "81", correct: true }, { text: "3", correct: false }, { text: "18", correct: false }, { text: "9", correct: false }] },
            { question: "Trong các số sau, số nào là số vô tỉ?", answers: [{ text: "√5", correct: true }, { text: "√9", correct: false }, { text: "0,5", correct: false }, { text: "-4", correct: false }] },
            { question: "Từ tỉ lệ thức x/6 = 5/3, giá trị của x là:", answers: [{ text: "10", correct: true }, { text: "1,8", correct: false }, { text: "15", correct: false }, { text: "30", correct: false }] },
            { question: "Số đối của số hữu tỉ -2/7 là:", answers: [{ text: "2/7", correct: true }, { text: "-2/7", correct: false }, { text: "7/2", correct: false }, { text: "-7/2", correct: false }] },
            { question: "Kết quả của phép tính (-5/7) : (10/21) là:", answers: [{ text: "-3/2", correct: true }, { text: "3/2", correct: false }, { text: "-2/3", correct: false }, { text: "-50/147", correct: false }] },
            { question: "So sánh hai số hữu tỉ -0,75 và -4/5, ta có:", answers: [{ text: "-0,75 > -4/5", correct: true }, { text: "-0,75 < -4/5", correct: false }, { text: "-0,75 = -4/5", correct: false }, { text: "Không so sánh được", correct: false }] },
            { question: "Giá trị của biểu thức | -3,4 | + | 1,2 | là:", answers: [{ text: "4,6", correct: true }, { text: "2,2", correct: false }, { text: "-2,2", correct: false }, { text: "-4,6", correct: false }] },
            { question: "Kết quả của (2^3)^2 là:", answers: [{ text: "2^6", correct: true }, { text: "2^5", correct: false }, { text: "2^9", correct: false }, { text: "4^3", correct: false }] },
            { question: "Số 0, (3) viết dưới dạng phân số tối giản là:", answers: [{ text: "1/3", correct: true }, { text: "3/10", correct: false }, { text: "3/99", correct: false }, { text: "3/5", correct: false }] },
            { question: "Tìm x, biết 2x - 1/3 = 5/3", answers: [{ text: "x = 1", correct: true }, { text: "x = 4/3", correct: false }, { text: "x = 2/3", correct: false }, { text: "x = 2", correct: false }] },
            { question: "Làm tròn số 127653 đến hàng nghìn ta được:", answers: [{ text: "128000", correct: true }, { text: "127000", correct: false }, { text: "127700", correct: false }, { text: "130000", correct: false }] },
            { question: "Căn bậc hai số học của 16 là:", answers: [{ text: "4", correct: true }, { text: "-4", correct: false }, { text: "±4", correct: false }, { text: "256", correct: false }] },
            { question: "Cho dãy tỉ số bằng nhau a/2 = b/3 = c/5 và a+b+c=20. Giá trị của b là:", answers: [{ text: "6", correct: true }, { text: "4", correct: false }, { text: "10", correct: false }, { text: "2", correct: false }] },
            { question: "Kết quả của phép tính 3^7 . 3^2 là:", answers: [{ text: "3^9", correct: true }, { text: "3^14", correct: false }, { text: "9^9", correct: false }, { text: "6^9", correct: false }] },
            { question: "Số nào sau đây không phải là số thực?", answers: [{ text: "√-4", correct: true }, { text: "√4", correct: false }, { text: "-5", correct: false }, { text: "0", correct: false }] },
            { question: "Nếu |x| = 2,5 thì x bằng:", answers: [{ text: "2,5 hoặc -2,5", correct: true }, { text: "2,5", correct: false }, { text: "-2,5", correct: false }, { text: "5", correct: false }] },

            // Chương 2: Hàm số và đồ thị (16 câu)
            { question: "Cho hàm số y = f(x) = 2x + 1. Giá trị f(-1) là:", answers: [{ text: "-1", correct: true }, { text: "1", correct: false }, { text: "3", correct: false }, { text: "-3", correct: false }] },
            { question: "Điểm A(-2; 4) thuộc góc phần tư thứ mấy trong mặt phẳng tọa độ Oxy?", answers: [{ text: "Thứ II", correct: true }, { text: "Thứ I", correct: false }, { text: "Thứ III", correct: false }, { text: "Thứ IV", correct: false }] },
            { question: "Đồ thị hàm số y = -4x là một đường thẳng đi qua điểm nào sau đây?", answers: [{ text: "M(1; -4)", correct: true }, { text: "N(1; 4)", correct: false }, { text: "P(-4; 1)", correct: false }, { text: "Q(0; -4)", correct: false }] },
            { question: "Cho biết x và y là hai đại lượng tỉ lệ thuận, và khi x = 3 thì y = 9. Hệ số tỉ lệ của y đối với x là:", answers: [{ text: "3", correct: true }, { text: "1/3", correct: false }, { text: "6", correct: false }, { text: "27", correct: false }] },
            { question: "Cho biết x và y là hai đại lượng tỉ lệ nghịch, và khi x = 4 thì y = 5. Khi x = 10 thì y bằng:", answers: [{ text: "2", correct: true }, { text: "12.5", correct: false }, { text: "8", correct: false }, { text: "20", correct: false }] },
            { question: "Trong mặt phẳng tọa độ Oxy, trục hoành là trục nào?", answers: [{ text: "Trục Ox", correct: true }, { text: "Trục Oy", correct: false }, { text: "Gốc tọa độ O", correct: false }, { text: "Cả Ox và Oy", correct: false }] },
            { question: "Điểm nào sau đây nằm trên trục tung Oy?", answers: [{ text: "A(0; -3)", correct: true }, { text: "B(-3; 0)", correct: false }, { text: "C(-3; -3)", correct: false }, { text: "O(0;0)", correct: false }] },
            { question: "Cho hàm số y = f(x) = 5 - 3x. Tính f(2).", answers: [{ text: "-1", correct: true }, { text: "1", correct: false }, { text: "11", correct: false }, { text: "4", correct: false }] },
            { question: "Đồ thị của hàm số y = ax (a ≠ 0) là:", answers: [{ text: "Một đường thẳng đi qua gốc tọa độ", correct: true }, { text: "Một đường thẳng không đi qua gốc tọa độ", correct: false }, { text: "Một đường cong", correct: false }, { text: "Một đường tròn", correct: false }] },
            { question: "Hai đại lượng x và y tỉ lệ nghịch với nhau theo hệ số tỉ lệ là 60. Công thức nào sau đây đúng?", answers: [{ text: "xy = 60", correct: true }, { text: "y = 60x", correct: false }, { text: "x = 60y", correct: false }, { text: "y = x/60", correct: false }] },
            { question: "Điểm B(3; -1) thuộc góc phần tư thứ mấy?", answers: [{ text: "Thứ IV", correct: true }, { text: "Thứ I", correct: false }, { text: "Thứ II", correct: false }, { text: "Thứ III", correct: false }] },
            { question: "Tung độ của điểm M(-5; 8) là:", answers: [{ text: "8", correct: true }, { text: "-5", correct: false }, { text: "5", correct: false }, { text: "-8", correct: false }] },
            { question: "Một ô tô đi từ A đến B với vận tốc 50 km/h hết 6 giờ. Nếu đi với vận tốc 60 km/h thì hết bao nhiêu thời gian?", answers: [{ text: "5 giờ", correct: true }, { text: "7,2 giờ", correct: false }, { text: "4 giờ", correct: false }, { text: "6 giờ", correct: false }] },
            { question: "Đại lượng y tỉ lệ thuận với đại lượng x theo hệ số tỉ lệ k. Khi x = 12 thì y = 4. Hệ số k bằng:", answers: [{ text: "1/3", correct: true }, { text: "3", correct: false }, { text: "48", correct: false }, { text: "8", correct: false }] },
            { question: "Điểm nào sau đây không thuộc đồ thị hàm số y = 3x - 2?", answers: [{ text: "C(2; 3)", correct: true }, { text: "A(1; 1)", correct: false }, { text: "B(0; -2)", correct: false }, { text: "D(-1; -5)", correct: false }] },
            { question: "Hoành độ của điểm N(7; -1) là:", answers: [{ text: "7", correct: true }, { text: "-1", correct: false }, { text: "1", correct: false }, { text: "-7", correct: false }] },

            // Chương 3: Đường thẳng vuông góc, song song (16 câu)
            { question: "Hai góc đối đỉnh thì:", answers: [{ text: "bằng nhau", correct: true }, { text: "bù nhau", correct: false }, { text: "phụ nhau", correct: false }, { text: "kề nhau", correct: false }] },
            { question: "Đường trung trực của đoạn thẳng AB là đường thẳng:", answers: [{ text: "vuông góc với AB tại trung điểm của nó", correct: true }, { text: "song song với AB", correct: false }, { text: "đi qua A và B", correct: false }, { text: "cắt AB tại một điểm bất kỳ", correct: false }] },
            { question: "Nếu đường thẳng c cắt hai đường thẳng a, b và trong các góc tạo thành có một cặp góc so le trong bằng nhau thì:", answers: [{ text: "a // b", correct: true }, { text: "a ⊥ b", correct: false }, { text: "a cắt b", correct: false }, { text: "a trùng b", correct: false }] },
            { question: "Qua một điểm ở ngoài một đường thẳng, có bao nhiêu đường thẳng song song với đường thẳng đó?", answers: [{ text: "Chỉ có một", correct: true }, { text: "Có hai", correct: false }, { text: "Không có", correct: false }, { text: "Vô số", correct: false }] },
            { question: "Nếu a ⊥ b và b ⊥ c thì:", answers: [{ text: "a // c", correct: true }, { text: "a ⊥ c", correct: false }, { text: "a trùng c", correct: false }, { text: "a cắt c", correct: false }] },
            { question: "Hai góc kề bù có tổng số đo bằng:", answers: [{ text: "180°", correct: true }, { text: "90°", correct: false }, { text: "360°", correct: false }, { text: "60°", correct: false }] },
            { question: "Một đường thẳng cắt hai đường thẳng song song tạo ra cặp góc trong cùng phía:", answers: [{ text: "bù nhau", correct: true }, { text: "bằng nhau", correct: false }, { text: "phụ nhau", correct: false }, { text: "so le trong", correct: false }] },
            { question: "Tia phân giác của một góc chia góc đó thành:", answers: [{ text: "hai góc bằng nhau", correct: true }, { text: "hai góc kề bù", correct: false }, { text: "hai góc vuông", correct: false }, { text: "hai góc nhọn", correct: false }] },
            { question: "Phát biểu 'Nếu một đường thẳng vuông góc với một trong hai đường thẳng song song thì nó cũng vuông góc với đường thẳng kia' là một:", answers: [{ text: "Định lí", correct: true }, { text: "Tiên đề", correct: false }, { text: "Định nghĩa", correct: false }, { text: "Giả thiết", correct: false }] },
            { question: "Hai góc có tổng số đo bằng 90° được gọi là hai góc:", answers: [{ text: "phụ nhau", correct: true }, { text: "kề nhau", correct: false }, { text: "bù nhau", correct: false }, { text: "đối đỉnh", correct: false }] },
            { question: "Cho ba đường thẳng phân biệt a, b, c. Nếu a // b và b // c thì:", answers: [{ text: "a // c", correct: true }, { text: "a ⊥ c", correct: false }, { text: "a cắt c", correct: false }, { text: "a trùng c", correct: false }] },
            { question: "Đường thẳng xy là đường trung trực của đoạn thẳng MN khi:", answers: [{ text: "xy ⊥ MN tại trung điểm của MN", correct: true }, { text: "xy // MN", correct: false }, { text: "xy cắt MN", correct: false }, { text: "xy đi qua M và N", correct: false }] },
            { question: "Cho góc xOy = 70°. Tia Oz là tia phân giác của góc xOy. Số đo góc xOz là:", answers: [{ text: "35°", correct: true }, { text: "70°", correct: false }, { text: "140°", correct: false }, { text: "55°", correct: false }] },
            { question: "Nếu đường thẳng c cắt hai đường thẳng a, b và trong các góc tạo thành có một cặp góc đồng vị bằng nhau thì:", answers: [{ text: "a // b", correct: true }, { text: "a ⊥ b", correct: false }, { text: "a cắt b", correct: false }, { text: "a trùng b", correct: false }] },
            { question: "Giả thiết của định lí là:", answers: [{ text: "Những điều cho biết trước", correct: true }, { text: "Những điều cần suy ra", correct: false }, { text: "Cả giả thiết và kết luận", correct: false }, { text: "Một khẳng định đúng", correct: false }] },
            { question: "Kết luận của định lí là:", answers: [{ text: "Những điều được suy ra từ giả thiết", correct: true }, { text: "Những điều cho biết trước", correct: false }, { text: "Một định nghĩa", correct: false }, { text: "Một tiên đề", correct: false }] },

            // Chương 4: Tam giác (20 câu)
            { question: "Tổng ba góc của một tam giác bằng:", answers: [{ text: "180°", correct: true }, { text: "90°", correct: false }, { text: "360°", correct: false }, { text: "100°", correct: false }] },
            { question: "Nếu ΔABC = ΔDEF thì cặp cạnh nào sau đây tương ứng bằng nhau?", answers: [{ text: "AC = DF", correct: true }, { text: "AB = EF", correct: false }, { text: "BC = DE", correct: false }, { text: "AC = DE", correct: false }] },
            { question: "Tam giác có ba cạnh bằng nhau được gọi là:", answers: [{ text: "Tam giác đều", correct: true }, { text: "Tam giác cân", correct: false }, { text: "Tam giác vuông", correct: false }, { text: "Tam giác tù", correct: false }] },
            { question: "Tam giác ABC cân tại A có góc B = 50°. Số đo góc A là:", answers: [{ text: "80°", correct: true }, { text: "50°", correct: false }, { text: "130°", correct: false }, { text: "40°", correct: false }] },
            { question: "Bộ ba độ dài nào sau đây có thể là ba cạnh của một tam giác vuông?", answers: [{ text: "3cm, 4cm, 5cm", correct: true }, { text: "2cm, 3cm, 4cm", correct: false }, { text: "4cm, 5cm, 6cm", correct: false }, { text: "1cm, 2cm, 3cm", correct: false }] },
            { question: "Trường hợp bằng nhau cạnh-cạnh-cạnh của hai tam giác được viết tắt là:", answers: [{ text: "c.c.c", correct: true }, { text: "c.g.c", correct: false }, { text: "g.c.g", correct: false }, { text: "cạnh huyền - góc nhọn", correct: false }] },
            { question: "Trong một tam giác vuông, cạnh đối diện với góc vuông được gọi là:", answers: [{ text: "Cạnh huyền", correct: true }, { text: "Cạnh góc vuông", correct: false }, { text: "Đường cao", correct: false }, { text: "Đường trung tuyến", correct: false }] },
            { question: "Tam giác MNP vuông tại M có MN = 6cm, MP = 8cm. Độ dài cạnh NP là:", answers: [{ text: "10cm", correct: true }, { text: "14cm", correct: false }, { text: "2cm", correct: false }, { text: "48cm", correct: false }] },
            { question: "Trường hợp bằng nhau góc-cạnh-góc được viết tắt là:", answers: [{ text: "g.c.g", correct: true }, { text: "c.g.c", correct: false }, { text: "c.c.c", correct: false }, { text: "g.g.g", correct: false }] },
            { question: "Một tam giác đều có mỗi góc bằng:", answers: [{ text: "60°", correct: true }, { text: "90°", correct: false }, { text: "180°", correct: false }, { text: "45°", correct: false }] },
            { question: "Trong tam giác ABC, nếu góc A > góc B thì:", answers: [{ text: "BC > AC", correct: true }, { text: "BC < AC", correct: false }, { text: "AB > BC", correct: false }, { text: "AC > AB", correct: false }] },
            { question: "Bộ ba độ dài nào sau đây không thể là ba cạnh của một tam giác?", answers: [{ text: "2cm, 3cm, 6cm", correct: true }, { text: "3cm, 4cm, 5cm", correct: false }, { text: "5cm, 5cm, 5cm", correct: false }, { text: "7cm, 8cm, 9cm", correct: false }] },
            { question: "Hai tam giác vuông bằng nhau nếu:", answers: [{ text: "Cạnh huyền và một góc nhọn tương ứng bằng nhau", correct: true }, { text: "Hai cạnh góc vuông bằng nhau", correct: false }, { text: "Hai góc nhọn bằng nhau", correct: false }, { text: "Có một cạnh bằng nhau", correct: false }] },
            { question: "Góc ngoài tại đỉnh C của tam giác ABC bằng:", answers: [{ text: "tổng hai góc A và B", correct: true }, { text: "tổng hai góc B và C", correct: false }, { text: "tổng hai góc A và C", correct: false }, { text: "góc C", correct: false }] },
            { question: "Tam giác có hai góc bằng nhau là tam giác gì?", answers: [{ text: "Tam giác cân", correct: true }, { text: "Tam giác đều", correct: false }, { text: "Tam giác vuông", correct: false }, { text: "Tam giác tù", correct: false }] },
            { question: "Trọng tâm của tam giác là giao điểm của ba đường nào?", answers: [{ text: "Ba đường trung tuyến", correct: true }, { text: "Ba đường cao", correct: false }, { text: "Ba đường phân giác", correct: false }, { text: "Ba đường trung trực", correct: false }] },
            { question: "Trong tam giác vuông cân, hai góc nhọn có số đo bằng:", answers: [{ text: "45°", correct: true }, { text: "30°", correct: false }, { text: "60°", correct: false }, { text: "90°", correct: false }] },
            { question: "Nếu ΔMNP = ΔXYZ thì góc nào tương ứng với góc N?", answers: [{ text: "Góc Y", correct: true }, { text: "Góc X", correct: false }, { text: "Góc Z", correct: false }, { text: "Góc M", correct: false }] },
            { question: "Trực tâm của tam giác là giao điểm của ba đường nào?", answers: [{ text: "Ba đường cao", correct:true }, { text: "Ba đường trung tuyến", correct: false }, { text: "Ba đường phân giác", correct: false }, { text: "Ba đường trung trực", correct: false }] },
            { question: "Trong tam giác ABC có AB=3, BC=4, AC=5. Tam giác ABC là tam giác gì?", answers: [{ text: "Tam giác vuông tại B", correct: true }, { text: "Tam giác vuông tại A", correct: false }, { text: "Tam giác cân", correct: false }, { text: "Tam giác đều", correct: false }] },

            // Chương 5: Thống kê (13 câu)
            { question: "Để biểu diễn sự thay đổi của một đại lượng theo thời gian, người ta thường dùng biểu đồ nào?", answers: [{ text: "Biểu đồ đoạn thẳng", correct: true }, { text: "Biểu đồ hình quạt tròn", correct: false }, { text: "Biểu đồ tranh", correct: false }, { text: "Bảng tần số", correct: false }] },
            { question: "Mốt của một dấu hiệu là:", answers: [{ text: "giá trị có tần số lớn nhất", correct: true }, { text: "giá trị lớn nhất", correct: false }, { text: "giá trị nhỏ nhất", correct: false }, { text: "tổng các giá trị", correct: false }] },
            { question: "Điểm kiểm tra Toán của một tổ học sinh là: 7, 8, 8, 9, 10, 8, 7. Mốt của dấu hiệu là:", answers: [{ text: "8", correct: true }, { text: "7", correct: false }, { text: "9", correct: false }, { text: "10", correct: false }] },
            { question: "Số trung bình cộng của các số: 4, 5, 6, 7, 8 là:", answers: [{ text: "6", correct: true }, { text: "5", correct: false }, { text: "7", correct: false }, { text: "30", correct: false }] },
            { question: "Tần số của một giá trị trong một dãy dữ liệu là:", answers: [{ text: "số lần giá trị đó xuất hiện", correct: true }, { text: "giá trị đó", correct: false }, { text: "giá trị lớn nhất", correct: false }, { text: "giá trị trung bình", correct: false }] },
            { question: "Vấn đề hay hiện tượng mà người điều tra quan tâm tìm hiểu được gọi là:", answers: [{ text: "Dấu hiệu điều tra", correct: true }, { text: "Tần số", correct: false }, { text: "Mốt", correct: false }, { text: "Giá trị", correct: false }] },
            { question: "Để biểu diễn tỉ lệ các phần trong tổng thể, người ta thường dùng:", answers: [{ text: "Biểu đồ hình quạt tròn", correct: true }, { text: "Biểu đồ cột", correct: false }, { text: "Biểu đồ đoạn thẳng", correct: false }, { text: "Bảng số liệu", correct: false }] },
            { question: "Tổng các tần số của các giá trị trong bảng tần số bằng:", answers: [{ text: "Số các giá trị của dấu hiệu", correct: true }, { text: "Số các giá trị khác nhau", correct: false }, { text: "Mốt của dấu hiệu", correct: false }, { text: "Số trung bình cộng", correct: false }] },
            { question: "Điều tra về số con trong mỗi gia đình ở một khu dân cư. Đây là loại điều tra gì?", answers: [{ text: "Thu thập số liệu thống kê", correct: true }, { text: "Thí nghiệm khoa học", correct: false }, { text: "Phỏng vấn", correct: false }, { text: "Quan sát", correct: false }] },
            { question: "Cho bảng tần số điểm kiểm tra: Điểm(x): 4, 5, 7, 8, 10. Tần số(n): 2, 3, 6, 5, 1. Lớp có bao nhiêu học sinh?", answers: [{ text: "17", correct: true }, { text: "15", correct: false }, { text: "5", correct: false }, { text: "34", correct: false }] },
            { question: "Số 'giày' của các bạn trong một tổ: 36, 37, 38, 37, 39, 37, 38. Số trung bình cộng (làm tròn đến hàng đơn vị) là:", answers: [{ text: "37", correct: true }, { text: "38", correct: false }, { text: "36", correct: false }, { text: "39", correct: false }] },
            { question: "Mỗi đối tượng được điều tra được gọi là:", answers: [{ text: "Một đơn vị điều tra", correct: true }, { text: "Một dấu hiệu", correct: false }, { text: "Một tần số", correct: "false" }, { text: "Một giá trị", correct: false }] },
            { question: "Bảng ghi các giá trị khác nhau của dấu hiệu và các tần số tương ứng được gọi là:", answers: [{ text: "Bảng tần số", correct: true }, { text: "Bảng điểm", correct: false }, { text: "Biểu đồ", correct: false }, { text: "Bảng dữ liệu", correct: false }] },

            // Chương 6: Biểu thức đại số (15 câu)
            { question: "Trong các biểu thức sau, biểu thức nào là đơn thức?", answers: [{ text: "5xy²", correct: true }, { text: "x + y", correct: false }, { text: "2(x - y)", correct: false }, { text: "1/x", correct: false }] },
            { question: "Bậc của đơn thức 3x²y³z là:", answers: [{ text: "6", correct: true }, { text: "5", correct: false }, { text: "3", correct: false }, { text: "2", correct: false }] },
            { question: "Giá trị của biểu thức x² - 2x + 1 tại x = 2 là:", answers: [{ text: "1", correct: true }, { text: "9", correct: false }, { text: "-1", correct: false }, { text: "5", correct: false }] },
            { question: "Kết quả của phép tính (3x²y) + (5x²y) là:", answers: [{ text: "8x²y", correct: true }, { text: "8x⁴y²", correct: false }, { text: "-2x²y", correct: false }, { text: "15x²y", correct: false }] },
            { question: "Thu gọn đa thức P(x) = 2x³ - x + 5 - 2x³ + x - 3 ta được:", answers: [{ text: "2", correct: true }, { text: "4x³ - 2x + 8", correct: false }, { text: "0", correct: false }, { text: "x³ + 2", correct: false }] },
            { question: "Nghiệm của đa thức Q(x) = 2x - 6 là:", answers: [{ text: "x = 3", correct: true }, { text: "x = -3", correct: false }, { text: "x = 6", correct: false }, { text: "x = -6", correct: false }] },
            { question: "Hệ số cao nhất của đa thức A(x) = -x³ + 4x² - 5x + 1 là:", answers: [{ text: "-1", correct: true }, { text: "4", correct: false }, { text: "1", correct: false }, { text: "-5", correct: false }] },
            { question: "Hai đơn thức đồng dạng là hai đơn thức có:", answers: [{ text: "phần biến giống nhau", correct: true }, { text: "hệ số bằng nhau", correct: false }, { text: "cùng bậc", correct: false }, { text: "phần biến khác nhau", correct: false }] },
            { question: "Cho P(x) = x² - 4. Nghiệm của đa thức P(x) là:", answers: [{ text: "x = 2 và x = -2", correct: true }, { text: "x = 4", correct: false }, { text: "x = 2", correct: false }, { text: "Vô nghiệm", correct: false }] },
            { question: "Bậc của đa thức M = x²y⁵ - xy⁴ + y⁶ + 1 là:", answers: [{ text: "7", correct: true }, { text: "6", correct: false }, { text: "5", correct: false }, { text: "4", correct: false }] },
            { question: "Hệ số tự do của đa thức B(x) = 2x⁴ - 3x + 7 là:", answers: [{ text: "7", correct: true }, { text: "2", correct: false }, { text: "-3", correct: false }, { text: "4", correct: false }] },
            { question: "Kết quả của phép trừ (5x - 2y) - (3x - 2y) là:", answers: [{ text: "2x", correct: true }, { text: "2x - 4y", correct: false }, { text: "8x - 4y", correct: false }, { text: "8x", correct: false }] },
            { question: "Đa thức nào sau đây không có nghiệm?", answers: [{ text: "x² + 1", correct: true }, { text: "x² - 1", correct: false }, { text: "x + 1", correct: false }, { text: "x²", correct: false }] },
            { question: "Phần hệ số của đơn thức -1/2 x³y² là:", answers: [{ text: "-1/2", correct: true }, { text: "1/2", correct: false }, { text: "3", correct: false }, { text: "2", correct: false }] },
            { question: "Sắp xếp đa thức F(x) = 5 - 6x² + 2x³ + x theo lũy thừa giảm dần của biến, ta được:", answers: [{ text: "2x³ - 6x² + x + 5", correct: true }, { text: "5 + x - 6x² + 2x³", correct: false }, { text: "-6x² + 2x³ + x + 5", correct: false }, { text: "x + 2x³ - 6x² + 5", correct: false }] }
        ];

        // --- State Variables ---
        let quizQuestions, currentQuestionIndex;
        let score;
        const QUESTIONS_PER_QUIZ = 20; // Number of questions per quiz session

        // --- Functions ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz() {
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            
            // Shuffle the entire bank and take a subset for the quiz
            const shuffledBank = shuffleArray([...questions]);
            quizQuestions = shuffledBank.slice(0, QUESTIONS_PER_QUIZ);

            currentQuestionIndex = 0;
            score = 0;
            
            totalQInQuizElement.innerText = quizQuestions.length;
            scoreElement.innerText = score;
            nextBtn.classList.add('hidden');

            showQuestion();
        }

        function showQuestion() {
            resetState();
            const currentQuestion = quizQuestions[currentQuestionIndex];
            questionText.innerText = `${currentQuestion.question}`;
            currentQNumberElement.innerText = currentQuestionIndex + 1;
            
            // *** CHANGE: Shuffle the answers for the current question ***
            const shuffledAnswers = shuffleArray([...currentQuestion.answers]);

            shuffledAnswers.forEach(answer => {
                const button = document.createElement('button');
                button.innerText = answer.text;
                button.classList.add('answer-btn', 'w-full', 'p-4', 'border-2', 'border-gray-300', 'dark:border-gray-600', 'rounded-lg', 'text-left', 'text-lg', 'bg-gray-100', 'dark:bg-gray-700', 'hover:bg-gray-200', 'dark:hover:bg-gray-600');
                if (answer.correct) {
                    button.dataset.correct = answer.correct;
                }
                button.addEventListener('click', selectAnswer);
                answerButtons.appendChild(button);
            });
        }

        function resetState() {
            nextBtn.classList.add('hidden');
            while (answerButtons.firstChild) {
                answerButtons.removeChild(answerButtons.firstChild);
            }
        }

        function selectAnswer(e) {
            const selectedBtn = e.target;
            const correct = selectedBtn.dataset.correct === 'true';

            if (correct) {
                score++;
                scoreElement.innerText = score;
            }

            Array.from(answerButtons.children).forEach(button => {
                setStatusClass(button, button.dataset.correct === 'true');
                button.classList.add('disabled'); // Disable all buttons after selection
            });

            if (currentQuestionIndex < quizQuestions.length - 1) {
                nextBtn.classList.remove('hidden');
            } else {
                // Automatically show results after the last question
                setTimeout(showResults, 1000);
            }
        }

        function setStatusClass(element, correct) {
            if (correct) {
                element.classList.add('correct');
            } else {
                element.classList.add('incorrect');
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            showQuestion();
        }

        function showResults() {
            quizContainer.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            
            finalScoreElement.innerText = `${score}/${quizQuestions.length}`;
            
            const percentage = (score / quizQuestions.length) * 100;
            if (percentage >= 80) {
                resultMessageElement.innerText = "Xuất sắc! Bạn nắm rất vững kiến thức.";
            } else if (percentage >= 50) {
                resultMessageElement.innerText = "Khá tốt! Cần xem lại một vài chỗ nhé.";
            } else {
                resultMessageElement.innerText = "Cần cố gắng nhiều hơn. Hãy ôn tập lại nhé!";
            }
        }

        // --- Event Listeners ---
        startBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', startQuiz);

    </script>
</body>
</html>

